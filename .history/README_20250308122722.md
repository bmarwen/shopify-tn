# Para Shop Subdomain Application Setup

Follow these steps to set up your shop subdomain application from scratch.

## Prerequisites

- Node.js 16.x or higher
- Docker and Docker Compose
- PostgreSQL (via Docker or installed locally)
- Git

## Installation Steps

### 1. Clone and Set Up the Project

```bash
# Create the project directory
mkdir para-shop
cd para-shop

# Initialize a new Next.js project with TypeScript
npx create-next-app@latest . --typescript

# Install required dependencies
npm install @prisma/client bcrypt jsonwebtoken next-auth zod react-hook-form @hookform/resolvers lucide-react tailwindcss autoprefixer postcss clsx tailwind-merge axios stripe @headlessui/react cva class-variance-authority
npm install -D prisma @types/bcrypt @types/jsonwebtoken ts-node
```

### 2. Set Up the Database with Docker

```bash
# Start the PostgreSQL database using Docker
docker-compose up -d
```

### 3. Initialize and Configure Prisma

```bash
# Initialize Prisma
npx prisma init

# After creating the schema.prisma file
npx prisma migrate dev --name init

# Seed the database with initial data
npx prisma db seed
```

### 4. Configure Environment Variables

Create a `.env` file in the root directory with the following content:

```env
# Database
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/para_shop_db?schema=public"

# NextAuth
NEXTAUTH_SECRET="your-nextauth-secret-here"
NEXTAUTH_URL="http://localhost:3001"
SHOP_SUBDOMAIN="para"
MAIN_DOMAIN="store.tn"

# Stripe (for payment processing in Advanced/Premium plans)
STRIPE_SECRET_KEY="your-stripe-secret-key"
STRIPE_WEBHOOK_SECRET="your-stripe-webhook-secret"

# App Settings
PORT=3001
```

### 5. Configure Local Hosts File

For local development with subdomains, you'll need to add the following to your hosts file:

```
127.0.0.1   para.store.tn
127.0.0.1   store.tn
```

On Windows, the hosts file is located at `C:\Windows\System32\drivers\etc\hosts`
On macOS/Linux, it's at `/etc/hosts`

### 6. Start the Development Server

```bash
# Run the Next.js development server
npm run dev
```

Your application will be available at http://para.store.tn:3001

### 7. Access Prisma Studio

To view and manage your database visually:

```bash
npx prisma studio
```

Prisma Studio will be available at http://localhost:5555

## Deployment to AWS

When deploying to AWS:

1. Create an EC2 instance (t4g recommended)
2. Install Docker and Docker Compose
3. Clone your repository
4. Set up your DNS to point your subdomain (para.store.tn) to your EC2 instance
5. Update your `.env` file with the appropriate values for production
6. Set up NGINX as a reverse proxy (see the nginx.conf template provided)
7. Build and start your Next.js application:

```bash
npm run build
npm run start
```

## Setting Up Additional Shop Subdomains

To create more shop subdomains (e.g., shop2.store.tn):

1. Clone this project to a new directory
2. Update the `.env` file with the new subdomain name
3. Update the database with the new shop information
4. Run on a different port (e.g., 3002)
5. Update your NGINX configuration to route traffic accordingly

Each shop will have its own application but can share the same database if needed.
